(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"5Orq":function(t,e,n){"use strict";n.r(e),n.d(e,"TableviewerModule",(function(){return Wt}));var i=n("PCNd"),o=n("1VvW"),c=n("kZht"),a=n("sH2/"),l=n("pKmL"),r=n("ofez"),s=n("ZTXN"),b=n("kuMc"),p=n("8j5Y"),g=n("YtkY"),h=n("mWib"),m=n("3kIJ"),u=n("RSjN"),d=n("Vz2p");const f=Object(r.q)(d.e,t=>t);var w=n("An66"),v=n("EmXI"),T=n("Tcl6"),y=n("hCLc"),j=n("uryd"),I=n("UDV5"),O=n("aDqW");function _(t,e){if(1&t){const t=c.Vb();c.Ub(0,"button",9),c.cc("click",(function(){return c.tc(t),c.gc().checkboxGroup.reset()})),c.Cc(1),c.hc(2,"translate"),c.Tb()}2&t&&(c.Bb(1),c.Ec(" ",c.ic(2,1,"ww.tableviewer.verb.deselect")," "))}function U(t,e){if(1&t&&(c.Ub(0,"span"),c.Cc(1),c.Tb()),2&t){const t=c.gc().$implicit;c.Bb(1),c.Ec(" - ",t.display,"")}}function C(t,e){if(1&t&&(c.Ub(0,"div",12),c.Ub(1,"mat-checkbox",13),c.hc(2,"async"),c.hc(3,"async"),c.Cc(4),c.Ac(5,U,2,1,"span",14),c.Tb(),c.Tb()),2&t){const t=e.$implicit,n=c.gc(2);c.mc("formGroup",n.checkboxGroup),c.Bb(1),c.mc("disabled",c.ic(2,5,n.selection$).root.indexOf(t.tag)<0&&c.ic(3,7,n.selection$).root.length>=3)("formControlName",t.tag),c.Bb(3),c.Ec("",t.gloss," "),c.Bb(1),c.mc("ngIf",t.display)}}function B(t,e){if(1&t&&(c.Ub(0,"mat-list",10),c.Ac(1,C,6,9,"div",11),c.hc(2,"async"),c.Tb()),2&t){const t=c.gc();c.Bb(1),c.mc("ngForOf",c.ic(2,1,t.viewableVerbs$))}}const D=function(t){return{value:t}};function P(t,e){if(1&t&&(c.Ub(0,"p",15),c.Ub(1,"span"),c.Cc(2),c.hc(3,"translate"),c.Tb(),c.Tb()),2&t){const t=c.gc();c.Bb(2),c.Dc(c.jc(3,1,"ww.tableviewer.verb.no-matching-verb",c.oc(4,D,t.searchField.value)))}}let S=(()=>{class t{constructor(t,e,n){this.verbService=t,this.fb=e,this.store=n,this.verbs$=this.verbService.verbs$,this.checkboxGroup=new m.f({}),this.unsubscribe$=new s.a}ngOnInit(){this.searchField=new m.d,this.verbForm=this.fb.group({search:this.searchField}),this.verbs$.pipe(Object(b.a)(this.unsubscribe$),Object(p.a)(t=>t.map(t=>this.checkboxGroup.addControl(t.tag,new m.d(!1)))),Object(p.a)(t=>this.checkboxGroup.valueChanges.pipe(Object(b.a)(this.unsubscribe$),Object(g.a)(t=>Object.keys(t).filter(e=>t[e])),Object(g.a)(t=>t.map(t=>this.verbService.getVerb(t))),Object(p.a)(t=>this.onVerbSelect(t))).subscribe())).subscribe(t=>{this.viewableVerbs$=this.searchField.valueChanges.pipe(Object(b.a)(this.unsubscribe$),Object(h.a)(200),Object(g.a)(t=>this.getEntriesFrom(t)))}),this.selection$=this.store.pipe(Object(b.a)(this.unsubscribe$),Object(r.t)(f))}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}onVerbSelect(t){this.store.dispatch(Object(u.g)({root:t}))}getEntriesFrom(t){return this.verbService.verbs.filter(e=>this.filterEntries(e,t))}filterEntries(t,e){return t.gloss.toLowerCase().indexOf(e.toLowerCase())>-1||t.tag.toLowerCase().indexOf(e.toLowerCase())>-1}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(l.i),c.Ob(m.c),c.Ob(r.h))},t.\u0275cmp=c.Ib({type:t,selectors:[["ww-tableviewer-verb-panel"]],decls:16,vars:14,consts:[[1,"panel"],[1,"panel__header","panel__header--tableview"],[1,"panel__title"],["class","mat-accent conjugate deselect","mat-raised-button","",3,"click",4,"ngIf"],[1,"panel__content"],[1,"control",3,"formGroup"],["autocomplete","off","type","text","aria-label","Number","matInput","","formControlName","search",3,"placeholder"],["class","panel__list","role","list",4,"ngIf"],["class","unfound",4,"ngIf"],["mat-raised-button","",1,"mat-accent","conjugate","deselect",3,"click"],["role","list",1,"panel__list"],[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"margin-5",3,"disabled","formControlName"],[4,"ngIf"],[1,"unfound"]],template:function(t,e){if(1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"h5",2),c.Cc(3),c.hc(4,"translate"),c.Tb(),c.Ac(5,_,3,3,"button",3),c.hc(6,"async"),c.Tb(),c.Ub(7,"div",4),c.Ub(8,"form"),c.Ub(9,"div"),c.Ub(10,"mat-form-field",5),c.Pb(11,"input",6),c.hc(12,"translate"),c.Tb(),c.Tb(),c.Tb(),c.Ac(13,B,3,3,"mat-list",7),c.Ac(14,P,4,6,"p",8),c.hc(15,"async"),c.Tb(),c.Tb()),2&t){var n=null;const t=""!==e.searchField.value&&null!==e.searchField.value&&0===(null==(n=c.ic(15,12,e.viewableVerbs$))?null:n.length);c.Bb(3),c.Dc(c.ic(4,6,"ww.tableviewer.verb.title")),c.Bb(2),c.mc("ngIf",c.ic(6,8,e.selection$).root.length>0),c.Bb(5),c.mc("formGroup",e.verbForm),c.Bb(1),c.mc("placeholder",c.ic(12,10,"ww.tableviewer.verb.placeholder")),c.Bb(2),c.mc("ngIf",""!==e.searchField.value),c.Bb(1),c.mc("ngIf",t)}},directives:[w.k,m.s,m.m,m.n,v.b,m.g,T.a,m.b,m.l,m.e,y.a,j.a,w.j,I.a],pipes:[O.c,w.b],styles:[".panel__content[_ngcontent-%COMP%]{position:absolute;top:40px;width:100%}mat-list[_ngcontent-%COMP%]{width:90%}.control[_ngcontent-%COMP%]{width:80%;margin-left:25px;margin-top:10px}.panel__list[_ngcontent-%COMP%]{max-height:8em;overflow-y:auto;padding:5px;overflow-x:hidden}button.deselect[_ngcontent-%COMP%]{padding:0 1em!important;height:20px;margin:16px 8px;line-height:1}.unfound[_ngcontent-%COMP%]{border:2px solid #03a9f4;border-radius:5px;padding:10px;margin:-5px 30px 0}"],changeDetection:0}),t})();var x=n("C05f"),A=n("J+dc"),$=n("EMFo"),k=n("gjCG"),M=n("BnVf"),V=n("WYJo"),H=n("ydE+"),F=n("qvIn"),L=(n("Ckg4"),n("am9W"),n("TLy2")),E=n("Ohay"),W=n("nsO7"),G=n("WUAd");function N(t,e){if(1&t&&(c.Ub(0,"div"),c.Pb(1,"div",1,2),c.Tb()),2&t){const t=e.ngIf;c.Bb(1),c.mc("options",t)("theme","vintage")}}let z=(()=>{class t{constructor(t,e,n){this.store=t,this.optionService=e,this.tierService=n,this.rgbToHex=function(t){return"#"+t.match(/\d+/g).slice(0,3).map(t=>{t=Number(t);let e=Number(t).toString(16);return e.length<2&&(e="0"+e),e}).join("")}}ngOnInit(){this.selection$=this.store.pipe(Object(r.t)(f)),this.defaultChartOption={tooltip:{show:!1,trigger:"item",triggerOn:"mousemove"},toolbox:{feature:{saveAsImage:{title:"save",show:!1}}},legend:{top:"2%",left:"3%",orient:"vertical",data:[],borderColor:"#c23531"},series:[]},this.defaultSeries={type:"tree",name:"",data:[],top:"0%",left:"12%",bottom:"25%",right:"20%",symbolSize:7,initialTreeDepth:0,lineStyle:{color:"#fff"},label:{normal:{position:"bottom",verticalAlign:"middle",align:"middle",color:"#fff"}},itemStyle:{borderColor:"#fff"},leaves:{label:{normal:{position:"top",verticalAlign:"middle",align:"middle"}},itemStyle:{borderColor:"#fff"}},expandAndCollapse:!0,roam:!0,animationDuration:550,animationDurationUpdate:750},this.options$=this.selection$.pipe(Object(L.a)(t=>{if(t.conjugations.length>0)return this.store.select($.g).pipe(Object(p.a)(t=>console.log(t)),Object(g.a)(e=>this.createChartData(t,{primary:this.rgbToHex(e.primary),accent:this.rgbToHex(e.accent)})),Object(E.a)())}))}createChartData(t,e){const n=Object.assign({},this.defaultChartOption);n.series=[];const i=t.standardTreeOrder,o=t.treeDepth,c=[],a=[];let l;t.conjugations.forEach(t=>{const e=t.input.root,n=this.optionService.getOption(t.input.option).gloss;let o=t.output.filter(t=>t.type&&t.type.indexOf("pronoun")>-1).map(t=>t.gloss).join();o||(o=t.input.agent);const c=this.returnTierValue(t.output);l=i?Object(W.merge)(l,{[e]:{[n]:{[o]:c}}}):Object(W.merge)(l,{[e]:{[o]:{[n]:c}}})}),Object.keys(l).forEach(t=>{a.push(t);const e={name:t,children:[]};Object.keys(l[t]).forEach(n=>{const i={name:n,children:[]};Object.keys(l[t][n]).forEach(e=>{i.children.push({name:e,children:[{name:l[t][n][e]}]})}),e.children.push(i)}),c.push(e)});let r=0,s=0;a.length<2?s=o:a.forEach(t=>{n.legend.data.push(t)});for(let b=0;b<c.length;b++){r+=20;const t=Object.assign({},this.defaultSeries);t.name=c[b].name,t.data=[c[b]],t.top=r.toString()+"%",t.lineStyle.color=e.primary,t.label.normal.color=e.primary,t.leaves.itemStyle.borderColor=e.accent,t.itemStyle.borderColor=e.accent,t.initialTreeDepth=s,n.series.push(t)}return n}returnTierValue(t,e=this.tierService.TIERS[0]){return t.filter(t=>t[e.key]).sort((function(t,e){return t.position-e.position})).map(t=>t[e.key]).join(e.separator)}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(r.h),c.Ob(l.d),c.Ob(l.g))},t.\u0275cmp=c.Ib({type:t,selectors:[["ww-conjugation-tree"]],decls:2,vars:3,consts:[[4,"ngIf"],["echarts","",1,"demo-chart",3,"options","theme"],["explorer",""]],template:function(t,e){1&t&&(c.Ac(0,N,3,2,"div",0),c.hc(1,"async")),2&t&&c.mc("ngIf",c.ic(1,1,e.options$))},directives:[w.k,G.b],pipes:[w.b],styles:[""],changeDetection:0}),t})();const J=["header"],R=["conjugate"];function q(t,e){if(1&t){const t=c.Vb();c.Ub(0,"select",20),c.cc("change",(function(e){return c.tc(t),c.gc(4).onChangeTreeDepth(e)})),c.hc(1,"translate"),c.Ub(2,"option",21),c.Cc(3,"0"),c.Tb(),c.Ub(4,"option",22),c.Cc(5,"1"),c.Tb(),c.Ub(6,"option",23),c.Cc(7,"2"),c.Tb(),c.Ub(8,"option",24),c.Cc(9,"3"),c.Tb(),c.Tb()}if(2&t){const t=c.gc(4);c.mc("matTooltip",c.ic(1,4,"ww.tableviewer.conj.depth-tip"))("matTooltipShowDelay",t.showDelay.value)("matTooltipHideDelay",t.hideDelay.value)("matTooltipPosition",t.tooltipPosition)}}function Y(t,e){if(1&t){const t=c.Vb();c.Ub(0,"button",25),c.cc("click",(function(){return c.tc(t),c.gc(4).onToggleTreeOrder()})),c.hc(1,"translate"),c.Ub(2,"mat-icon",26),c.Cc(3,"swap_horiz"),c.Tb(),c.Tb()}if(2&t){const t=c.gc(4);c.mc("matTooltip",c.ic(1,4,"ww.tableviewer.conj.order-tip"))("matTooltipShowDelay",t.showDelay.value)("matTooltipHideDelay",t.hideDelay.value)("matTooltipPosition",t.tooltipPosition)}}function X(t,e){if(1&t){const t=c.Vb();c.Ub(0,"button",17),c.cc("click",(function(){return c.tc(t),c.gc(4).download()})),c.hc(1,"translate"),c.Ub(2,"mat-icon",27),c.Cc(3,"get_app"),c.Tb(),c.Tb()}if(2&t){const t=c.gc(4);c.mc("matTooltip",c.ic(1,4,"ww.tableviewer.conj.download-tip"))("matTooltipShowDelay",t.showDelay.value)("matTooltipHideDelay",t.hideDelay.value)("matTooltipPosition",t.tooltipPosition)}}function Q(t,e){1&t&&(c.Ub(0,"mat-icon",28),c.Cc(1,"account_tree"),c.Tb())}function Z(t,e){1&t&&(c.Ub(0,"mat-icon",28),c.Cc(1,"grid_on"),c.Tb())}function K(t,e){if(1&t){const t=c.Vb();c.Ub(0,"div",11),c.Ub(1,"button",12,13),c.cc("click",(function(e){return c.tc(t),c.gc(3).onManualConjugation(e)})),c.Cc(3),c.hc(4,"translate"),c.Tb(),c.Ac(5,q,10,6,"select",14),c.Ac(6,Y,4,6,"button",15),c.Ac(7,X,4,6,"button",16),c.Ub(8,"button",17),c.cc("click",(function(){return c.tc(t),c.gc(3).onToggleGridView()})),c.hc(9,"translate"),c.Ac(10,Q,2,0,"mat-icon",18),c.Ac(11,Z,2,0,"mat-icon",18),c.Tb(),c.Ub(12,"button",17),c.cc("click",(function(){c.tc(t);const e=c.gc(3);return e.show_toolbar=!e.show_toolbar})),c.hc(13,"translate"),c.Ub(14,"mat-icon",19),c.Cc(15,"cancel"),c.Tb(),c.Tb(),c.Tb()}if(2&t){const t=e.ngIf,n=c.gc(3);c.Bb(3),c.Ec(" ",c.ic(4,14,"ww.tableviewer.conj.conjugate")," "),c.Bb(2),c.mc("ngIf",!t.gridView),c.Bb(1),c.mc("ngIf",!t.gridView),c.Bb(1),c.mc("ngIf",t.gridView),c.Bb(1),c.mc("matTooltip",c.ic(9,16,"ww.tableviewer.conj.explorer-tip"))("matTooltipShowDelay",n.showDelay.value)("matTooltipHideDelay",n.hideDelay.value)("matTooltipPosition",n.tooltipPosition),c.Bb(2),c.mc("ngIf",t.gridView),c.Bb(1),c.mc("ngIf",!t.gridView),c.Bb(1),c.mc("matTooltip",c.ic(13,18,"ww.tableviewer.conj.hide-toolbar-tip"))("matTooltipShowDelay",n.showDelay.value)("matTooltipHideDelay",n.hideDelay.value)("matTooltipPosition",n.tooltipPosition)}}function tt(t,e){if(1&t&&(c.Ub(0,"div",7),c.Ub(1,"h5",8,9),c.Cc(3),c.hc(4,"translate"),c.Tb(),c.Ac(5,K,16,20,"div",10),c.hc(6,"async"),c.Tb()),2&t){const t=c.gc(2);c.Bb(3),c.Dc(c.ic(4,2,"ww.tableviewer.conj.title")),c.Bb(2),c.mc("ngIf",c.ic(6,4,t.selection$))}}function et(t,e){1&t&&c.Pb(0,"hr")}function nt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"button",29),c.cc("click",(function(){c.tc(t);const e=c.gc(2);return e.show_toolbar=!e.show_toolbar})),c.hc(1,"translate"),c.Ub(2,"mat-icon",30),c.Cc(3,"add_circle"),c.Tb(),c.Tb()}if(2&t){const t=c.gc(2);c.mc("matTooltip",c.ic(1,4,"ww.tableviewer.conj.show-toolbar-tip"))("matTooltipShowDelay",t.showDelay.value)("matTooltipHideDelay",t.hideDelay.value)("matTooltipPosition",t.tooltipPosition)}}function it(t,e){1&t&&(c.Pb(0,"h3",38),c.hc(1,"translate")),2&t&&c.mc("innerHTML",c.ic(1,1,"ww.tableviewer.conj.gridview"),c.uc)}function ot(t,e){1&t&&(c.Pb(0,"h3",38),c.hc(1,"translate")),2&t&&c.mc("innerHTML",c.ic(1,1,"ww.tableviewer.conj.treeview"),c.uc)}function ct(t,e){if(1&t&&(c.Pb(0,"h4",39),c.hc(1,"translate")),2&t){const t=c.gc(3);c.mc("ngClass",t.routeAnimationsElements)("innerHTML",c.ic(1,2,"ww.tableviewer.conj.instructions"),c.uc)}}function at(t,e){1&t&&(c.Pb(0,"h3",40),c.hc(1,"translate")),2&t&&c.mc("innerHTML",c.ic(1,1,"ww.tableviewer.conj.instructions-mobile"),c.uc)}function lt(t,e){1&t&&c.Pb(0,"mat-spinner",41),2&t&&c.mc("color","accent")}function rt(t,e){if(1&t&&(c.Ub(0,"div",42),c.Pb(1,"ww-conjugation-tree"),c.Tb()),2&t){const t=c.gc().ngIf;c.mc("hidden",t.gridView)}}function st(t,e){if(1&t&&(c.Ub(0,"div",47),c.Ub(1,"h3",48),c.Cc(2),c.hc(3,"translate"),c.Tb(),c.Ub(4,"p",49),c.Cc(5),c.Tb(),c.Ub(6,"p",49),c.Cc(7),c.hc(8,"translate"),c.Tb(),c.Tb()),2&t){const t=c.gc().ngIf;c.Bb(2),c.Ec(" ",c.ic(3,3,"ww.tableviewer.conj.error.title")," "),c.Bb(3),c.Dc(t),c.Bb(2),c.Ec(" ",c.ic(8,5,"ww.tableviewer.conj.error.message")," ")}}function bt(t,e){1&t&&(c.Ub(0,"th"),c.Ub(1,"h3",52),c.Cc(2),c.hc(3,"translate"),c.Tb(),c.Tb()),2&t&&(c.Bb(2),c.Dc(c.ic(3,1,"ww.language")))}function pt(t,e){1&t&&(c.Ub(0,"th"),c.Ub(1,"h3",52),c.Cc(2),c.hc(3,"translate"),c.Tb(),c.Tb()),2&t&&(c.Bb(2),c.Dc(c.ic(3,1,"ww.translation-language")))}function gt(t,e){if(1&t&&c.Pb(0,"h3",57),2&t){const t=c.gc().$implicit;c.mc("innerHTML",t.html,c.uc)}}function ht(t,e){if(1&t&&c.Pb(0,"h5",57),2&t){const t=c.gc().$implicit;c.mc("innerHTML",t.html,c.uc)}}function mt(t,e){if(1&t&&(c.Ub(0,"div"),c.Ac(1,gt,1,1,"h3",56),c.Ac(2,ht,1,1,"h5",56),c.Tb()),2&t){const t=e.$implicit,n=e.index,i=c.gc(5).ngIf;c.Bb(1),c.mc("ngIf","L1"===t.options.language&&0===n),c.Bb(1),c.mc("ngIf",i.level[t.name]&&"L1"===t.options.language&&0!==n)}}function ut(t,e){if(1&t&&c.Pb(0,"h3",57),2&t){const t=c.gc().$implicit;c.mc("innerHTML",t.html,c.uc)}}function dt(t,e){if(1&t&&c.Pb(0,"h5",57),2&t){const t=c.gc().$implicit;c.mc("innerHTML",t.html,c.uc)}}function ft(t,e){if(1&t&&(c.Ub(0,"div"),c.Ac(1,ut,1,1,"h3",56),c.Ac(2,dt,1,1,"h5",56),c.Tb()),2&t){const t=e.$implicit,n=e.index,i=c.gc(6).ngIf;c.Bb(1),c.mc("ngIf",i.level[t.name]&&"L2"===t.options.language&&0===n),c.Bb(1),c.mc("ngIf",i.level[t.name]&&"L2"===t.options.language&&0!==n)}}function wt(t,e){if(1&t&&(c.Ub(0,"td",52),c.Ac(1,ft,3,2,"div",54),c.Tb()),2&t){const t=c.gc().$implicit;c.Bb(1),c.mc("ngForOf",t)}}function vt(t,e){if(1&t&&(c.Ub(0,"tr",53),c.Ub(1,"td",52),c.Ac(2,mt,3,2,"div",54),c.Tb(),c.Ac(3,wt,2,1,"td",55),c.Tb()),2&t){const t=e.$implicit,n=c.gc(4).ngIf;c.Bb(2),c.mc("ngForOf",t),c.Bb(1),c.mc("ngIf",n.level["breakdown-translation"]||n.level.translation)}}function Tt(t,e){if(1&t&&(c.Ub(0,"table",50),c.Ub(1,"thead"),c.Ub(2,"tr"),c.Ac(3,bt,4,3,"th",5),c.Ac(4,pt,4,3,"th",5),c.Tb(),c.Tb(),c.Ub(5,"tbody"),c.Ac(6,vt,4,2,"tr",51),c.Tb(),c.Tb()),2&t){const t=c.gc().ngIf,e=c.gc(2).ngIf;c.Bb(3),c.mc("ngIf",e.level["breakdown-translation"]||e.level.translation),c.Bb(1),c.mc("ngIf",e.level["breakdown-translation"]||e.level.translation),c.Bb(2),c.mc("ngForOf",t)}}function yt(t,e){if(1&t&&(c.Ub(0,"div",43),c.Ub(1,"div",44),c.Ac(2,st,9,7,"div",45),c.Ac(3,Tt,7,3,"table",46),c.Tb(),c.Tb()),2&t){const t=e.ngIf,n=c.gc().ngIf,i=c.gc(2);c.mc("hidden",!n.gridView),c.Bb(2),c.mc("ngIf",i.isString(t)),c.Bb(1),c.mc("ngIf",!i.isString(t))}}function jt(t,e){if(1&t&&(c.Ub(0,"div"),c.Ub(1,"div"),c.Ac(2,it,2,3,"h3",31),c.Ac(3,ot,2,3,"h3",31),c.Ac(4,ct,2,4,"h4",32),c.Ac(5,at,2,3,"h3",33),c.Ac(6,lt,1,1,"mat-spinner",34),c.Tb(),c.Ub(7,"div",35),c.Ac(8,rt,2,1,"div",36),c.Tb(),c.Ac(9,yt,4,3,"div",37),c.hc(10,"async"),c.Tb()),2&t){const t=e.ngIf,n=c.gc(2);c.Bb(2),c.mc("ngIf",t.gridView&&0===t.conjugations.length),c.Bb(1),c.mc("ngIf",!t.gridView&&0===t.conjugations.length),c.Bb(1),c.mc("ngIf",!t.loading&&0===t.conjugations.length),c.Bb(1),c.mc("ngIf",!t.loading&&0===t.conjugations.length),c.Bb(1),c.mc("ngIf",t.loading&&t.gridView),c.Bb(2),c.mc("ngIf",!t.gridView&&t.conjugations),c.Bb(1),c.mc("ngIf",!t.loading&&c.ic(10,7,n.gridData$))}}function It(t,e){if(1&t&&(c.Ub(0,"div",1),c.Ub(1,"div",2),c.Ac(2,tt,7,6,"div",3),c.Ub(3,"div",4),c.Ac(4,et,1,0,"hr",5),c.Ac(5,nt,4,6,"button",6),c.Tb(),c.Tb(),c.Ac(6,jt,11,9,"div",5),c.hc(7,"async"),c.Tb()),2&t){const t=c.gc();c.Bb(2),c.mc("ngIf",t.show_toolbar),c.Bb(2),c.mc("ngIf",t.show_toolbar),c.Bb(1),c.mc("ngIf",!t.show_toolbar),c.Bb(1),c.mc("ngIf",c.ic(7,4,t.selection$))}}let Ot=(()=>{class t{constructor(t,e,n){this.store=t,this.notificationService=e,this.tierService=n,this.showDelay=new m.d(600),this.hideDelay=new m.d(200),this.tooltipPosition="above",this.routeAnimationsElements=l.f,this.loading=!1,this.show_toolbar=!0,this.showExplorer$=new x.a(!1),this.manualConjugation$=new s.a,this.order$=new x.a(!0),this.depth$=new x.a(1)}ngOnInit(){this.settings$=this.store.pipe(Object(r.t)($.d)),this.selection$=this.store.pipe(Object(r.t)(f)),this.gridData$=this.selection$.pipe(Object(g.a)(t=>!!(t.gridView&&t.conjugations.length>0)&&(console.log(this.tierService.createTiers(t.conjugations)),this.tierService.createTiers(t.conjugations))))}ngAfterViewInit(){const t=getComputedStyle(this.header.nativeElement).getPropertyValue("color"),e=getComputedStyle(this.conjugateBtn._elementRef.nativeElement).getPropertyValue("background-color");this.store.dispatch(Object(M.m)({primary:t,accent:e}))}onChangeTreeDepth(t){this.store.dispatch(Object(u.f)({treeDepth:t.target.selectedIndex}))}onToggleTreeOrder(){this.store.dispatch(Object(u.j)({name:"standardTreeOrder"}))}onToggleGridView(){this.store.dispatch(Object(u.i)({name:"gridView"}))}onManualConjugation(t){this.store.dispatch(Object(u.h)(t))}isString(t){return"string"==typeof t}download(){this.selection$.pipe(Object(A.a)(1),Object(p.a)(t=>console.log(t))).subscribe()}updateToast(t,e=200){t?this.notificationService.translated(Object(k.a)("ww.tableviewer.notifications.download.success"),{},"success"):this.notificationService.translated(Object(k.a)("ww.tableviewer.notifications.download.error"),{},"error")}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(r.h),c.Ob(l.c),c.Ob(l.g))},t.\u0275cmp=c.Ib({type:t,selectors:[["ww-tableviewer-conj-panel"]],viewQuery:function(t,e){var n;1&t&&(c.Ic(J,!0),c.Ic(R,!0)),2&t&&(c.pc(n=c.dc())&&(e.header=n.first),c.pc(n=c.dc())&&(e.conjugateBtn=n.first))},decls:2,vars:3,consts:[["class","panel",4,"ngIf"],[1,"panel"],[1,"panel__header__container"],["class","panel__header panel__header--tableview",4,"ngIf"],[1,"panel__underline","height-5"],[4,"ngIf"],["class","float-right ui-button toolbar__tool","mat-icon-button","",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","click",4,"ngIf"],[1,"panel__header","panel__header--tableview"],[1,"panel__title"],["header",""],["class","panel__toolbar toolbar",4,"ngIf"],[1,"panel__toolbar","toolbar"],["mat-raised-button","",1,"conjugate","mat-accent",3,"click"],["conjugate",""],["class","toolbar__tool ui-button",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","change",4,"ngIf"],["class","toolbar__tool ui-button","mat-icon-button","",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","click",4,"ngIf"],["class","ui-button toolbar__tool","mat-icon-button","",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","click",4,"ngIf"],["mat-icon-button","",1,"ui-button","toolbar__tool",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","click"],["aria-label","Conjugate",4,"ngIf"],["aria-label","Hide toolbar"],[1,"toolbar__tool","ui-button",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","change"],["value","0"],["selected","","value","1"],["value","2"],["value","3"],["mat-icon-button","",1,"toolbar__tool","ui-button",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","click"],["aria-label","Switch pronoun and temp"],["aria-label","Download conjugations"],["aria-label","Conjugate"],["mat-icon-button","",1,"float-right","ui-button","toolbar__tool",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","click"],["aria-label","Show toolbar"],["class","center-text margin-top-50",3,"innerHTML",4,"ngIf"],["class","desktop-only center-text margin-top-50 padding-20",3,"ngClass","innerHTML",4,"ngIf"],["class","mobile-only padding-15 center-text",3,"innerHTML",4,"ngIf"],["class","centered margin-top-100",3,"color",4,"ngIf"],[1,"panel__tree__container"],["class","full-width full-height",3,"hidden",4,"ngIf"],[3,"hidden",4,"ngIf"],[1,"center-text","margin-top-50",3,"innerHTML"],[1,"desktop-only","center-text","margin-top-50","padding-20",3,"ngClass","innerHTML"],[1,"mobile-only","padding-15","center-text",3,"innerHTML"],[1,"centered","margin-top-100",3,"color"],[1,"full-width","full-height",3,"hidden"],[3,"hidden"],["id","table-container",1,"rel"],["class","error__container",4,"ngIf"],["class","full-width abs",4,"ngIf"],[1,"error__container"],[1,"error__header"],[1,"error__message"],[1,"full-width","abs"],["class","b--bottom",4,"ngFor","ngForOf"],[1,"center-text"],[1,"b--bottom"],[4,"ngFor","ngForOf"],["class","center-text",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"]],template:function(t,e){1&t&&(c.Ac(0,It,8,6,"div",0),c.hc(1,"async")),2&t&&c.mc("ngIf",c.ic(1,1,e.settings$))},directives:[w.k,y.a,V.a,H.a,m.p,m.r,w.i,F.b,z,w.j],pipes:[w.b,O.c],styles:["button.conjugate[_ngcontent-%COMP%]{line-height:1.875em!important;padding:0 1em!important;margin-right:1em}"],changeDetection:0}),t})();var _t=n("IOEv"),Ut=n("pTnX");function Ct(t,e){if(1&t&&(c.Ub(0,"span",9),c.Cc(1),c.Tb()),2&t){const t=c.gc(2).ngIf;c.Bb(1),c.Fc(" (+",t.agent.length-1," ",2===t.agent.length?"other":"others",") ")}}function Bt(t,e){if(1&t&&(c.Ub(0,"mat-option",10),c.Cc(1),c.Tb()),2&t){const t=e.$implicit;c.mc("value",t),c.Bb(1),c.Dc(t.gloss)}}function Dt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"mat-form-field",5),c.Ub(1,"mat-label"),c.Cc(2),c.hc(3,"translate"),c.Tb(),c.Ub(4,"mat-select",6),c.cc("selectionChange",(function(e){return c.tc(t),c.gc(2).onAgentSelect(e)})),c.Ub(5,"mat-select-trigger"),c.Cc(6),c.Ac(7,Ct,2,2,"span",7),c.Tb(),c.Ac(8,Bt,2,2,"mat-option",8),c.hc(9,"async"),c.Tb(),c.Tb()}if(2&t){const t=c.gc().ngIf,e=c.gc();c.Bb(2),c.Dc(c.ic(3,5,"ww.tableviewer.pers.select-agent")),c.Bb(2),c.mc("ngModel",t.agent),c.Bb(2),c.Ec(" ",t.agent?null==t.agent[0]?null:t.agent[0].gloss:""," "),c.Bb(1),c.mc("ngIf",t.agent.length>1),c.Bb(1),c.mc("ngForOf",c.ic(9,7,e.possiblePronouns$))}}function Pt(t,e){if(1&t&&(c.Ub(0,"span",9),c.Cc(1),c.Tb()),2&t){const t=c.gc(2).ngIf;c.Bb(1),c.Fc(" (+",t.patient.length-1," ",2===t.patient.length?"other":"others",") ")}}function St(t,e){if(1&t&&(c.Ub(0,"mat-option",10),c.Cc(1),c.Tb()),2&t){const t=e.$implicit;c.mc("value",t),c.Bb(1),c.Dc(t.gloss)}}function xt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"mat-form-field",5),c.Ub(1,"mat-label"),c.Cc(2),c.hc(3,"translate"),c.Tb(),c.Ub(4,"mat-select",6),c.cc("selectionChange",(function(e){return c.tc(t),c.gc(2).onPatientSelect(e)})),c.Ub(5,"mat-select-trigger"),c.Cc(6),c.Ac(7,Pt,2,2,"span",7),c.Tb(),c.Ac(8,St,2,2,"mat-option",8),c.hc(9,"async"),c.Tb(),c.Tb()}if(2&t){const t=c.gc().ngIf,e=c.gc();c.Bb(2),c.Dc(c.ic(3,5,"ww.tableviewer.pers.select-patient")),c.Bb(2),c.mc("ngModel",t.patient),c.Bb(2),c.Ec(" ",t.patient?null==t.patient[0]?null:t.patient[0].gloss:""," "),c.Bb(1),c.mc("ngIf",t.patient.length>1),c.Bb(1),c.mc("ngForOf",c.ic(9,7,e.possiblePronouns$))}}function At(t,e){if(1&t&&(c.Ub(0,"div",1),c.Ub(1,"div",2),c.Ub(2,"h5",3),c.Cc(3),c.hc(4,"translate"),c.Tb(),c.Tb(),c.Ac(5,Dt,10,9,"mat-form-field",4),c.Ac(6,xt,10,9,"mat-form-field",4),c.Tb()),2&t){const t=c.gc();c.Bb(3),c.Dc(c.ic(4,3,"ww.tableviewer.pers.title")),c.Bb(2),c.mc("ngIf",t.validationService.validate("display","categories","agents")),c.Bb(1),c.mc("ngIf",t.validationService.validate("display","categories","patients"))}}let $t=(()=>{class t{constructor(t,e,n){this.pnService=t,this.store=e,this.validationService=n,this.possiblePronouns$=this.pnService.pronouns$}ngOnInit(){this.selection$=this.store.pipe(Object(r.t)(f))}onAgentSelect(t){this.store.dispatch(Object(u.a)({agent:t.value}))}onPatientSelect(t){this.store.dispatch(Object(u.e)({patient:t.value}))}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(l.e),c.Ob(r.h),c.Ob(l.h))},t.\u0275cmp=c.Ib({type:t,selectors:[["ww-tableviewer-pers-panel"]],decls:2,vars:3,consts:[["class","panel",4,"ngIf"],[1,"panel"],[1,"panel__header--tableview","panel__header"],[1,"panel__title"],["class","control",4,"ngIf"],[1,"control"],["multiple","",3,"ngModel","selectionChange"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"example-additional-selection"],[3,"value"]],template:function(t,e){1&t&&(c.Ac(0,At,7,5,"div",0),c.hc(1,"async")),2&t&&c.mc("ngIf",c.ic(1,1,e.selection$))},directives:[w.k,v.b,v.e,_t.a,m.l,m.o,_t.c,w.j,Ut.i],pipes:[w.b,O.c],styles:[".control[_ngcontent-%COMP%]{margin-left:25px;margin-top:5px}button.deselect[_ngcontent-%COMP%]{padding:0 1em!important;height:20px;margin:16px 8px;line-height:1}"],changeDetection:0}),t})();function kt(t,e){if(1&t&&(c.Ub(0,"span",8),c.Cc(1),c.Tb()),2&t){const t=c.gc().ngIf;c.Bb(1),c.Fc(" (+",t.option.length-1," ",2===t.option.length?"other":"others",") ")}}function Mt(t,e){if(1&t&&(c.Ub(0,"mat-option",9),c.Cc(1),c.Tb()),2&t){const t=e.$implicit;c.mc("value",t),c.Bb(1),c.Dc(t.gloss)}}function Vt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"mat-select",5),c.cc("selectionChange",(function(e){return c.tc(t),c.gc().onOptionSelect(e)})),c.Ub(1,"mat-select-trigger"),c.Cc(2),c.Ac(3,kt,2,2,"span",6),c.Tb(),c.Ac(4,Mt,2,2,"mat-option",7),c.hc(5,"async"),c.Tb()}if(2&t){const t=e.ngIf,n=c.gc();c.mc("ngModel",t.option),c.Bb(2),c.Ec(" ",t.option.length?t.option[0].gloss:""," "),c.Bb(1),c.mc("ngIf",t.option.length>1),c.Bb(1),c.mc("ngForOf",c.ic(5,4,n.possibleTimes$))}}let Ht=(()=>{class t{constructor(t,e){this.optionService=t,this.store=e,this.possibleTimes$=this.optionService.options$}ngOnInit(){this.selection$=this.store.pipe(Object(r.t)(f))}onOptionSelect(t){this.store.dispatch(Object(u.d)({option:t.value}))}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(l.d),c.Ob(r.h))},t.\u0275cmp=c.Ib({type:t,selectors:[["ww-tableviewer-temp-panel"]],decls:11,vars:9,consts:[[1,"panel"],[1,"panel__header","panel__header--tableview"],[1,"panel__title"],[1,"control"],["multiple","",3,"ngModel","selectionChange",4,"ngIf"],["multiple","",3,"ngModel","selectionChange"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"example-additional-selection"],[3,"value"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"h5",2),c.Cc(3),c.hc(4,"translate"),c.Tb(),c.Tb(),c.Ub(5,"mat-form-field",3),c.Ub(6,"mat-label"),c.Cc(7),c.hc(8,"translate"),c.Tb(),c.Ac(9,Vt,6,6,"mat-select",4),c.hc(10,"async"),c.Tb(),c.Tb()),2&t&&(c.Bb(3),c.Dc(c.ic(4,3,"ww.tableviewer.temp.title")),c.Bb(4),c.Dc(c.ic(8,5,"ww.tableviewer.temp.select")),c.Bb(2),c.mc("ngIf",c.ic(10,7,e.selection$)))},directives:[v.b,v.e,w.k,_t.a,m.l,m.o,_t.c,w.j,Ut.i],pipes:[O.c,w.b],styles:[".control[_ngcontent-%COMP%]{width:80%;margin-left:25px;margin-top:-10px}.panel[_ngcontent-%COMP%]{top:0;position:absolute}button.deselect[_ngcontent-%COMP%]{padding:0 1em!important;height:20px;margin:16px 8px;line-height:1}"],changeDetection:0}),t})();const Ft=["conjPanel"],Lt=[{path:"",component:(()=>{class t{constructor(){this.breakpoint=1100,this.useTestAPI=!1}ngOnInit(){this.cols=window.innerWidth<=this.breakpoint?3:12,this.rows=window.innerWidth<=this.breakpoint?1:5,this.conjcolspan=window.innerWidth<=this.breakpoint?3:9,this.conjrowspan=window.innerWidth<=this.breakpoint?3:5}onResize(t){this.cols=t.target.innerWidth<=this.breakpoint?3:12,this.rows=window.innerWidth<=this.breakpoint?1:5,this.conjcolspan=window.innerWidth<=this.breakpoint?3:9,this.conjrowspan=window.innerWidth<=this.breakpoint?3:5}conjugate(){this.conjPanel.conjugate()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Ib({type:t,selectors:[["ww-tableviewer"]],viewQuery:function(t,e){var n;1&t&&c.Ic(Ft,!0),2&t&&c.pc(n=c.dc())&&(e.conjPanel=n.first)},decls:11,vars:9,consts:[[1,"container","page__content","vwidth-90","centered","margin-bottom-50"],["rowHeight","8em",3,"cols","resize"],[1,"br--tl","b--left","b--top","b--bottom","bg-white",3,"colspan","rowspan"],[1,"custom-scroll","full-width","full-height"],[1,"b--top","b--left","b--right","br--tr","br--br","b--bottom","bg-white",3,"colspan","rowspan"],["conjPanel",""],[1,"b--left","bg-white",3,"colspan","rowspan"],[1,"br--bl","b--top","b--left","b--bottom","bg-white",3,"colspan","rowspan"],[1,"custom-scroll","full-width"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"mat-grid-list",1),c.cc("resize",(function(t){return e.onResize(t)}),!1,c.sc),c.Ub(2,"mat-grid-tile",2),c.Pb(3,"ww-tableviewer-verb-panel",3),c.Tb(),c.Ub(4,"mat-grid-tile",4),c.Pb(5,"ww-tableviewer-conj-panel",3,5),c.Tb(),c.Ub(7,"mat-grid-tile",6),c.Pb(8,"ww-tableviewer-pers-panel",3),c.Tb(),c.Ub(9,"mat-grid-tile",7),c.Pb(10,"ww-tableviewer-temp-panel",8),c.Tb(),c.Tb(),c.Tb()),2&t&&(c.Bb(1),c.mc("cols",e.cols),c.Bb(1),c.mc("colspan",3)("rowspan",2),c.Bb(2),c.mc("colspan",e.conjcolspan)("rowspan",e.conjrowspan),c.Bb(3),c.mc("colspan",3)("rowspan",2),c.Bb(2),c.mc("colspan",3)("rowspan",1))},directives:[a.a,a.c,S,Ot,$t,Ht],styles:[""],changeDetection:0}),t})(),data:{title:"ww.menu.tableviewer"}}];let Et=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[o.j.forChild(Lt)],o.j]}),t})(),Wt=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[i.a,Et,G.a]]}),t})()}}]);