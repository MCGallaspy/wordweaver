function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"5Orq":function(t,e,n){"use strict";n.r(e),n.d(e,"TableviewerModule",(function(){return Xt}));var i=n("PCNd"),o=n("1VvW"),c=n("kZht"),a=n("sH2/"),r=n("pKmL"),l=n("ofez"),s=n("ZTXN"),b=n("kuMc"),u=n("8j5Y"),p=n("YtkY"),g=n("mWib"),h=n("3kIJ"),f=n("RSjN"),m=n("Vz2p"),d=Object(l.q)(m.e,(function(t){return t})),v=n("An66"),w=n("EmXI"),T=n("Tcl6"),y=n("hCLc"),_=n("uryd"),C=n("UDV5"),j=n("aDqW");function I(t,e){if(1&t){var n=c.Vb();c.Ub(0,"button",9),c.cc("click",(function(){return c.tc(n),c.gc().checkboxGroup.reset()})),c.Cc(1),c.hc(2,"translate"),c.Tb()}2&t&&(c.Bb(1),c.Ec(" ",c.ic(2,1,"ww.tableviewer.verb.deselect")," "))}function O(t,e){if(1&t&&(c.Ub(0,"span"),c.Cc(1),c.Tb()),2&t){var n=c.gc().$implicit;c.Bb(1),c.Ec(" - ",n.display,"")}}function U(t,e){if(1&t&&(c.Ub(0,"div",12),c.Ub(1,"mat-checkbox",13),c.hc(2,"async"),c.hc(3,"async"),c.Cc(4),c.Ac(5,O,2,1,"span",14),c.Tb(),c.Tb()),2&t){var n=e.$implicit,i=c.gc(2);c.mc("formGroup",i.checkboxGroup),c.Bb(1),c.mc("disabled",c.ic(2,5,i.selection$).root.indexOf(n.tag)<0&&c.ic(3,7,i.selection$).root.length>=3)("formControlName",n.tag),c.Bb(3),c.Ec("",n.gloss," "),c.Bb(1),c.mc("ngIf",n.display)}}function k(t,e){if(1&t&&(c.Ub(0,"mat-list",10),c.Ac(1,U,6,9,"div",11),c.hc(2,"async"),c.Tb()),2&t){var n=c.gc();c.Bb(1),c.mc("ngForOf",c.ic(2,1,n.viewableVerbs$))}}var B=function(t){return{value:t}};function D(t,e){if(1&t&&(c.Ub(0,"p",15),c.Ub(1,"span"),c.Cc(2),c.hc(3,"translate"),c.Tb(),c.Tb()),2&t){var n=c.gc();c.Bb(2),c.Dc(c.jc(3,1,"ww.tableviewer.verb.no-matching-verb",c.oc(4,B,n.searchField.value)))}}var P,S=((P=function(){function t(e,n,i){_classCallCheck(this,t),this.verbService=e,this.fb=n,this.store=i,this.verbs$=this.verbService.verbs$,this.checkboxGroup=new h.f({}),this.unsubscribe$=new s.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.searchField=new h.d,this.verbForm=this.fb.group({search:this.searchField}),this.verbs$.pipe(Object(b.a)(this.unsubscribe$),Object(u.a)((function(e){return e.map((function(e){return t.checkboxGroup.addControl(e.tag,new h.d(!1))}))})),Object(u.a)((function(e){return t.checkboxGroup.valueChanges.pipe(Object(b.a)(t.unsubscribe$),Object(p.a)((function(t){return Object.keys(t).filter((function(e){return t[e]}))})),Object(p.a)((function(e){return e.map((function(e){return t.verbService.getVerb(e)}))})),Object(u.a)((function(e){return t.onVerbSelect(e)}))).subscribe()}))).subscribe((function(e){t.viewableVerbs$=t.searchField.valueChanges.pipe(Object(b.a)(t.unsubscribe$),Object(g.a)(200),Object(p.a)((function(e){return t.getEntriesFrom(e)})))})),this.selection$=this.store.pipe(Object(b.a)(this.unsubscribe$),Object(l.t)(d))}},{key:"ngOnDestroy",value:function(){this.unsubscribe$.next(),this.unsubscribe$.complete()}},{key:"onVerbSelect",value:function(t){this.store.dispatch(Object(f.g)({root:t}))}},{key:"getEntriesFrom",value:function(t){var e=this;return this.verbService.verbs.filter((function(n){return e.filterEntries(n,t)}))}},{key:"filterEntries",value:function(t,e){return t.gloss.toLowerCase().indexOf(e.toLowerCase())>-1||t.tag.toLowerCase().indexOf(e.toLowerCase())>-1}}]),t}()).\u0275fac=function(t){return new(t||P)(c.Ob(r.i),c.Ob(h.c),c.Ob(l.h))},P.\u0275cmp=c.Ib({type:P,selectors:[["ww-tableviewer-verb-panel"]],decls:16,vars:14,consts:[[1,"panel"],[1,"panel__header","panel__header--tableview"],[1,"panel__title"],["class","mat-accent conjugate deselect","mat-raised-button","",3,"click",4,"ngIf"],[1,"panel__content"],[1,"control",3,"formGroup"],["autocomplete","off","type","text","aria-label","Number","matInput","","formControlName","search",3,"placeholder"],["class","panel__list","role","list",4,"ngIf"],["class","unfound",4,"ngIf"],["mat-raised-button","",1,"mat-accent","conjugate","deselect",3,"click"],["role","list",1,"panel__list"],[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"margin-5",3,"disabled","formControlName"],[4,"ngIf"],[1,"unfound"]],template:function(t,e){if(1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"h5",2),c.Cc(3),c.hc(4,"translate"),c.Tb(),c.Ac(5,I,3,3,"button",3),c.hc(6,"async"),c.Tb(),c.Ub(7,"div",4),c.Ub(8,"form"),c.Ub(9,"div"),c.Ub(10,"mat-form-field",5),c.Pb(11,"input",6),c.hc(12,"translate"),c.Tb(),c.Tb(),c.Tb(),c.Ac(13,k,3,3,"mat-list",7),c.Ac(14,D,4,6,"p",8),c.hc(15,"async"),c.Tb(),c.Tb()),2&t){var n=null,i=""!==e.searchField.value&&null!==e.searchField.value&&0===(null==(n=c.ic(15,12,e.viewableVerbs$))?null:n.length);c.Bb(3),c.Dc(c.ic(4,6,"ww.tableviewer.verb.title")),c.Bb(2),c.mc("ngIf",c.ic(6,8,e.selection$).root.length>0),c.Bb(5),c.mc("formGroup",e.verbForm),c.Bb(1),c.mc("placeholder",c.ic(12,10,"ww.tableviewer.verb.placeholder")),c.Bb(2),c.mc("ngIf",""!==e.searchField.value),c.Bb(1),c.mc("ngIf",i)}},directives:[v.k,h.s,h.m,h.n,w.b,h.g,T.a,h.b,h.l,h.e,y.a,_.a,v.j,C.a],pipes:[j.c,v.b],styles:[".panel__content[_ngcontent-%COMP%]{position:absolute;top:40px;width:100%}mat-list[_ngcontent-%COMP%]{width:90%}.control[_ngcontent-%COMP%]{width:80%;margin-left:25px;margin-top:10px}.panel__list[_ngcontent-%COMP%]{max-height:8em;overflow-y:auto;padding:5px;overflow-x:hidden}button.deselect[_ngcontent-%COMP%]{padding:0 1em!important;height:20px;margin:16px 8px;line-height:1}.unfound[_ngcontent-%COMP%]{border:2px solid #03a9f4;border-radius:5px;padding:10px;margin:-5px 30px 0}"],changeDetection:0}),P),x=n("C05f"),A=n("J+dc"),$=n("EMFo"),M=n("gjCG"),V=n("BnVf"),H=n("WYJo"),F=n("ydE+"),E=n("qvIn"),L=(n("Ckg4"),n("am9W"),n("TLy2")),W=n("Ohay"),G=n("nsO7"),N=n("WUAd");function z(t,e){if(1&t&&(c.Ub(0,"div"),c.Pb(1,"div",1,2),c.Tb()),2&t){var n=e.ngIf;c.Bb(1),c.mc("options",n)("theme","vintage")}}var J,R=((J=function(){function t(e,n,i){_classCallCheck(this,t),this.store=e,this.optionService=n,this.tierService=i,this.rgbToHex=function(t){return"#"+t.match(/\d+/g).slice(0,3).map((function(t){t=Number(t);var e=Number(t).toString(16);return e.length<2&&(e="0"+e),e})).join("")}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.selection$=this.store.pipe(Object(l.t)(d)),this.defaultChartOption={tooltip:{show:!1,trigger:"item",triggerOn:"mousemove"},toolbox:{feature:{saveAsImage:{title:"save",show:!1}}},legend:{top:"2%",left:"3%",orient:"vertical",data:[],borderColor:"#c23531"},series:[]},this.defaultSeries={type:"tree",name:"",data:[],top:"0%",left:"12%",bottom:"25%",right:"20%",symbolSize:7,initialTreeDepth:0,lineStyle:{color:"#fff"},label:{normal:{position:"bottom",verticalAlign:"middle",align:"middle",color:"#fff"}},itemStyle:{borderColor:"#fff"},leaves:{label:{normal:{position:"top",verticalAlign:"middle",align:"middle"}},itemStyle:{borderColor:"#fff"}},expandAndCollapse:!0,roam:!0,animationDuration:550,animationDurationUpdate:750},this.options$=this.selection$.pipe(Object(L.a)((function(e){if(e.conjugations.length>0)return t.store.select($.g).pipe(Object(u.a)((function(t){return console.log(t)})),Object(p.a)((function(n){return t.createChartData(e,{primary:t.rgbToHex(n.primary),accent:t.rgbToHex(n.accent)})})),Object(W.a)())})))}},{key:"createChartData",value:function(t,e){var n=this,i=Object.assign({},this.defaultChartOption);i.series=[];var o,c=t.standardTreeOrder,a=t.treeDepth,r=[],l=[];t.conjugations.forEach((function(t){var e=t.input.root,i=n.optionService.getOption(t.input.option).gloss,a=t.output.filter((function(t){return t.type&&t.type.indexOf("pronoun")>-1})).map((function(t){return t.gloss})).join();a||(a=t.input.agent);var r=n.returnTierValue(t.output);o=c?Object(G.merge)(o,_defineProperty({},e,_defineProperty({},i,_defineProperty({},a,r)))):Object(G.merge)(o,_defineProperty({},e,_defineProperty({},a,_defineProperty({},i,r))))})),Object.keys(o).forEach((function(t){l.push(t);var e={name:t,children:[]};Object.keys(o[t]).forEach((function(n){var i={name:n,children:[]};Object.keys(o[t][n]).forEach((function(e){i.children.push({name:e,children:[{name:o[t][n][e]}]})})),e.children.push(i)})),r.push(e)}));var s=0,b=0;l.length<2?b=a:l.forEach((function(t){i.legend.data.push(t)}));for(var u=0;u<r.length;u++){s+=20;var p=Object.assign({},this.defaultSeries);p.name=r[u].name,p.data=[r[u]],p.top=s.toString()+"%",p.lineStyle.color=e.primary,p.label.normal.color=e.primary,p.leaves.itemStyle.borderColor=e.accent,p.itemStyle.borderColor=e.accent,p.initialTreeDepth=b,i.series.push(p)}return i}},{key:"returnTierValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.tierService.TIERS[0];return t.filter((function(t){return t[e.key]})).sort((function(t,e){return t.position-e.position})).map((function(t){return t[e.key]})).join(e.separator)}}]),t}()).\u0275fac=function(t){return new(t||J)(c.Ob(l.h),c.Ob(r.d),c.Ob(r.g))},J.\u0275cmp=c.Ib({type:J,selectors:[["ww-conjugation-tree"]],decls:2,vars:3,consts:[[4,"ngIf"],["echarts","",1,"demo-chart",3,"options","theme"],["explorer",""]],template:function(t,e){1&t&&(c.Ac(0,z,3,2,"div",0),c.hc(1,"async")),2&t&&c.mc("ngIf",c.ic(1,1,e.options$))},directives:[v.k,N.b],pipes:[v.b],styles:[""],changeDetection:0}),J),q=["header"],Y=["conjugate"];function X(t,e){if(1&t){var n=c.Vb();c.Ub(0,"select",20),c.cc("change",(function(t){return c.tc(n),c.gc(4).onChangeTreeDepth(t)})),c.hc(1,"translate"),c.Ub(2,"option",21),c.Cc(3,"0"),c.Tb(),c.Ub(4,"option",22),c.Cc(5,"1"),c.Tb(),c.Ub(6,"option",23),c.Cc(7,"2"),c.Tb(),c.Ub(8,"option",24),c.Cc(9,"3"),c.Tb(),c.Tb()}if(2&t){var i=c.gc(4);c.mc("matTooltip",c.ic(1,4,"ww.tableviewer.conj.depth-tip"))("matTooltipShowDelay",i.showDelay.value)("matTooltipHideDelay",i.hideDelay.value)("matTooltipPosition",i.tooltipPosition)}}function Q(t,e){if(1&t){var n=c.Vb();c.Ub(0,"button",25),c.cc("click",(function(){return c.tc(n),c.gc(4).onToggleTreeOrder()})),c.hc(1,"translate"),c.Ub(2,"mat-icon",26),c.Cc(3,"swap_horiz"),c.Tb(),c.Tb()}if(2&t){var i=c.gc(4);c.mc("matTooltip",c.ic(1,4,"ww.tableviewer.conj.order-tip"))("matTooltipShowDelay",i.showDelay.value)("matTooltipHideDelay",i.hideDelay.value)("matTooltipPosition",i.tooltipPosition)}}function Z(t,e){if(1&t){var n=c.Vb();c.Ub(0,"button",17),c.cc("click",(function(){return c.tc(n),c.gc(4).download()})),c.hc(1,"translate"),c.Ub(2,"mat-icon",27),c.Cc(3,"get_app"),c.Tb(),c.Tb()}if(2&t){var i=c.gc(4);c.mc("matTooltip",c.ic(1,4,"ww.tableviewer.conj.download-tip"))("matTooltipShowDelay",i.showDelay.value)("matTooltipHideDelay",i.hideDelay.value)("matTooltipPosition",i.tooltipPosition)}}function K(t,e){1&t&&(c.Ub(0,"mat-icon",28),c.Cc(1,"account_tree"),c.Tb())}function tt(t,e){1&t&&(c.Ub(0,"mat-icon",28),c.Cc(1,"grid_on"),c.Tb())}function et(t,e){if(1&t){var n=c.Vb();c.Ub(0,"div",11),c.Ub(1,"button",12,13),c.cc("click",(function(t){return c.tc(n),c.gc(3).onManualConjugation(t)})),c.Cc(3),c.hc(4,"translate"),c.Tb(),c.Ac(5,X,10,6,"select",14),c.Ac(6,Q,4,6,"button",15),c.Ac(7,Z,4,6,"button",16),c.Ub(8,"button",17),c.cc("click",(function(){return c.tc(n),c.gc(3).onToggleGridView()})),c.hc(9,"translate"),c.Ac(10,K,2,0,"mat-icon",18),c.Ac(11,tt,2,0,"mat-icon",18),c.Tb(),c.Ub(12,"button",17),c.cc("click",(function(){c.tc(n);var t=c.gc(3);return t.show_toolbar=!t.show_toolbar})),c.hc(13,"translate"),c.Ub(14,"mat-icon",19),c.Cc(15,"cancel"),c.Tb(),c.Tb(),c.Tb()}if(2&t){var i=e.ngIf,o=c.gc(3);c.Bb(3),c.Ec(" ",c.ic(4,14,"ww.tableviewer.conj.conjugate")," "),c.Bb(2),c.mc("ngIf",!i.gridView),c.Bb(1),c.mc("ngIf",!i.gridView),c.Bb(1),c.mc("ngIf",i.gridView),c.Bb(1),c.mc("matTooltip",c.ic(9,16,"ww.tableviewer.conj.explorer-tip"))("matTooltipShowDelay",o.showDelay.value)("matTooltipHideDelay",o.hideDelay.value)("matTooltipPosition",o.tooltipPosition),c.Bb(2),c.mc("ngIf",i.gridView),c.Bb(1),c.mc("ngIf",!i.gridView),c.Bb(1),c.mc("matTooltip",c.ic(13,18,"ww.tableviewer.conj.hide-toolbar-tip"))("matTooltipShowDelay",o.showDelay.value)("matTooltipHideDelay",o.hideDelay.value)("matTooltipPosition",o.tooltipPosition)}}function nt(t,e){if(1&t&&(c.Ub(0,"div",7),c.Ub(1,"h5",8,9),c.Cc(3),c.hc(4,"translate"),c.Tb(),c.Ac(5,et,16,20,"div",10),c.hc(6,"async"),c.Tb()),2&t){var n=c.gc(2);c.Bb(3),c.Dc(c.ic(4,2,"ww.tableviewer.conj.title")),c.Bb(2),c.mc("ngIf",c.ic(6,4,n.selection$))}}function it(t,e){1&t&&c.Pb(0,"hr")}function ot(t,e){if(1&t){var n=c.Vb();c.Ub(0,"button",29),c.cc("click",(function(){c.tc(n);var t=c.gc(2);return t.show_toolbar=!t.show_toolbar})),c.hc(1,"translate"),c.Ub(2,"mat-icon",30),c.Cc(3,"add_circle"),c.Tb(),c.Tb()}if(2&t){var i=c.gc(2);c.mc("matTooltip",c.ic(1,4,"ww.tableviewer.conj.show-toolbar-tip"))("matTooltipShowDelay",i.showDelay.value)("matTooltipHideDelay",i.hideDelay.value)("matTooltipPosition",i.tooltipPosition)}}function ct(t,e){1&t&&(c.Pb(0,"h3",38),c.hc(1,"translate")),2&t&&c.mc("innerHTML",c.ic(1,1,"ww.tableviewer.conj.gridview"),c.uc)}function at(t,e){1&t&&(c.Pb(0,"h3",38),c.hc(1,"translate")),2&t&&c.mc("innerHTML",c.ic(1,1,"ww.tableviewer.conj.treeview"),c.uc)}function rt(t,e){if(1&t&&(c.Pb(0,"h4",39),c.hc(1,"translate")),2&t){var n=c.gc(3);c.mc("ngClass",n.routeAnimationsElements)("innerHTML",c.ic(1,2,"ww.tableviewer.conj.instructions"),c.uc)}}function lt(t,e){1&t&&(c.Pb(0,"h3",40),c.hc(1,"translate")),2&t&&c.mc("innerHTML",c.ic(1,1,"ww.tableviewer.conj.instructions-mobile"),c.uc)}function st(t,e){1&t&&c.Pb(0,"mat-spinner",41),2&t&&c.mc("color","accent")}function bt(t,e){if(1&t&&(c.Ub(0,"div",42),c.Pb(1,"ww-conjugation-tree"),c.Tb()),2&t){var n=c.gc().ngIf;c.mc("hidden",n.gridView)}}function ut(t,e){if(1&t&&(c.Ub(0,"div",47),c.Ub(1,"h3",48),c.Cc(2),c.hc(3,"translate"),c.Tb(),c.Ub(4,"p",49),c.Cc(5),c.Tb(),c.Ub(6,"p",49),c.Cc(7),c.hc(8,"translate"),c.Tb(),c.Tb()),2&t){var n=c.gc().ngIf;c.Bb(2),c.Ec(" ",c.ic(3,3,"ww.tableviewer.conj.error.title")," "),c.Bb(3),c.Dc(n),c.Bb(2),c.Ec(" ",c.ic(8,5,"ww.tableviewer.conj.error.message")," ")}}function pt(t,e){1&t&&(c.Ub(0,"th"),c.Ub(1,"h3",52),c.Cc(2),c.hc(3,"translate"),c.Tb(),c.Tb()),2&t&&(c.Bb(2),c.Dc(c.ic(3,1,"ww.language")))}function gt(t,e){1&t&&(c.Ub(0,"th"),c.Ub(1,"h3",52),c.Cc(2),c.hc(3,"translate"),c.Tb(),c.Tb()),2&t&&(c.Bb(2),c.Dc(c.ic(3,1,"ww.translation-language")))}function ht(t,e){if(1&t&&c.Pb(0,"h3",57),2&t){var n=c.gc().$implicit;c.mc("innerHTML",n.html,c.uc)}}function ft(t,e){if(1&t&&c.Pb(0,"h5",57),2&t){var n=c.gc().$implicit;c.mc("innerHTML",n.html,c.uc)}}function mt(t,e){if(1&t&&(c.Ub(0,"div"),c.Ac(1,ht,1,1,"h3",56),c.Ac(2,ft,1,1,"h5",56),c.Tb()),2&t){var n=e.$implicit,i=e.index,o=c.gc(5).ngIf;c.Bb(1),c.mc("ngIf","L1"===n.options.language&&0===i),c.Bb(1),c.mc("ngIf",o.level[n.name]&&"L1"===n.options.language&&0!==i)}}function dt(t,e){if(1&t&&c.Pb(0,"h3",57),2&t){var n=c.gc().$implicit;c.mc("innerHTML",n.html,c.uc)}}function vt(t,e){if(1&t&&c.Pb(0,"h5",57),2&t){var n=c.gc().$implicit;c.mc("innerHTML",n.html,c.uc)}}function wt(t,e){if(1&t&&(c.Ub(0,"div"),c.Ac(1,dt,1,1,"h3",56),c.Ac(2,vt,1,1,"h5",56),c.Tb()),2&t){var n=e.$implicit,i=e.index,o=c.gc(6).ngIf;c.Bb(1),c.mc("ngIf",o.level[n.name]&&"L2"===n.options.language&&0===i),c.Bb(1),c.mc("ngIf",o.level[n.name]&&"L2"===n.options.language&&0!==i)}}function Tt(t,e){if(1&t&&(c.Ub(0,"td",52),c.Ac(1,wt,3,2,"div",54),c.Tb()),2&t){var n=c.gc().$implicit;c.Bb(1),c.mc("ngForOf",n)}}function yt(t,e){if(1&t&&(c.Ub(0,"tr",53),c.Ub(1,"td",52),c.Ac(2,mt,3,2,"div",54),c.Tb(),c.Ac(3,Tt,2,1,"td",55),c.Tb()),2&t){var n=e.$implicit,i=c.gc(4).ngIf;c.Bb(2),c.mc("ngForOf",n),c.Bb(1),c.mc("ngIf",i.level["breakdown-translation"]||i.level.translation)}}function _t(t,e){if(1&t&&(c.Ub(0,"table",50),c.Ub(1,"thead"),c.Ub(2,"tr"),c.Ac(3,pt,4,3,"th",5),c.Ac(4,gt,4,3,"th",5),c.Tb(),c.Tb(),c.Ub(5,"tbody"),c.Ac(6,yt,4,2,"tr",51),c.Tb(),c.Tb()),2&t){var n=c.gc().ngIf,i=c.gc(2).ngIf;c.Bb(3),c.mc("ngIf",i.level["breakdown-translation"]||i.level.translation),c.Bb(1),c.mc("ngIf",i.level["breakdown-translation"]||i.level.translation),c.Bb(2),c.mc("ngForOf",n)}}function Ct(t,e){if(1&t&&(c.Ub(0,"div",43),c.Ub(1,"div",44),c.Ac(2,ut,9,7,"div",45),c.Ac(3,_t,7,3,"table",46),c.Tb(),c.Tb()),2&t){var n=e.ngIf,i=c.gc().ngIf,o=c.gc(2);c.mc("hidden",!i.gridView),c.Bb(2),c.mc("ngIf",o.isString(n)),c.Bb(1),c.mc("ngIf",!o.isString(n))}}function jt(t,e){if(1&t&&(c.Ub(0,"div"),c.Ub(1,"div"),c.Ac(2,ct,2,3,"h3",31),c.Ac(3,at,2,3,"h3",31),c.Ac(4,rt,2,4,"h4",32),c.Ac(5,lt,2,3,"h3",33),c.Ac(6,st,1,1,"mat-spinner",34),c.Tb(),c.Ub(7,"div",35),c.Ac(8,bt,2,1,"div",36),c.Tb(),c.Ac(9,Ct,4,3,"div",37),c.hc(10,"async"),c.Tb()),2&t){var n=e.ngIf,i=c.gc(2);c.Bb(2),c.mc("ngIf",n.gridView&&0===n.conjugations.length),c.Bb(1),c.mc("ngIf",!n.gridView&&0===n.conjugations.length),c.Bb(1),c.mc("ngIf",!n.loading&&0===n.conjugations.length),c.Bb(1),c.mc("ngIf",!n.loading&&0===n.conjugations.length),c.Bb(1),c.mc("ngIf",n.loading&&n.gridView),c.Bb(2),c.mc("ngIf",!n.gridView&&n.conjugations),c.Bb(1),c.mc("ngIf",!n.loading&&c.ic(10,7,i.gridData$))}}function It(t,e){if(1&t&&(c.Ub(0,"div",1),c.Ub(1,"div",2),c.Ac(2,nt,7,6,"div",3),c.Ub(3,"div",4),c.Ac(4,it,1,0,"hr",5),c.Ac(5,ot,4,6,"button",6),c.Tb(),c.Tb(),c.Ac(6,jt,11,9,"div",5),c.hc(7,"async"),c.Tb()),2&t){var n=c.gc();c.Bb(2),c.mc("ngIf",n.show_toolbar),c.Bb(2),c.mc("ngIf",n.show_toolbar),c.Bb(1),c.mc("ngIf",!n.show_toolbar),c.Bb(1),c.mc("ngIf",c.ic(7,4,n.selection$))}}var Ot,Ut=((Ot=function(){function t(e,n,i){_classCallCheck(this,t),this.store=e,this.notificationService=n,this.tierService=i,this.showDelay=new h.d(600),this.hideDelay=new h.d(200),this.tooltipPosition="above",this.routeAnimationsElements=r.f,this.loading=!1,this.show_toolbar=!0,this.showExplorer$=new x.a(!1),this.manualConjugation$=new s.a,this.order$=new x.a(!0),this.depth$=new x.a(1)}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.settings$=this.store.pipe(Object(l.t)($.d)),this.selection$=this.store.pipe(Object(l.t)(d)),this.gridData$=this.selection$.pipe(Object(p.a)((function(e){return!!(e.gridView&&e.conjugations.length>0)&&(console.log(t.tierService.createTiers(e.conjugations)),t.tierService.createTiers(e.conjugations))})))}},{key:"ngAfterViewInit",value:function(){var t=getComputedStyle(this.header.nativeElement).getPropertyValue("color"),e=getComputedStyle(this.conjugateBtn._elementRef.nativeElement).getPropertyValue("background-color");this.store.dispatch(Object(V.m)({primary:t,accent:e}))}},{key:"onChangeTreeDepth",value:function(t){this.store.dispatch(Object(f.f)({treeDepth:t.target.selectedIndex}))}},{key:"onToggleTreeOrder",value:function(){this.store.dispatch(Object(f.j)({name:"standardTreeOrder"}))}},{key:"onToggleGridView",value:function(){this.store.dispatch(Object(f.i)({name:"gridView"}))}},{key:"onManualConjugation",value:function(t){this.store.dispatch(Object(f.h)(t))}},{key:"isString",value:function(t){return"string"==typeof t}},{key:"download",value:function(){this.selection$.pipe(Object(A.a)(1),Object(u.a)((function(t){return console.log(t)}))).subscribe()}},{key:"updateToast",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1],t?this.notificationService.translated(Object(M.a)("ww.tableviewer.notifications.download.success"),{},"success"):this.notificationService.translated(Object(M.a)("ww.tableviewer.notifications.download.error"),{},"error")}}]),t}()).\u0275fac=function(t){return new(t||Ot)(c.Ob(l.h),c.Ob(r.c),c.Ob(r.g))},Ot.\u0275cmp=c.Ib({type:Ot,selectors:[["ww-tableviewer-conj-panel"]],viewQuery:function(t,e){var n;1&t&&(c.Ic(q,!0),c.Ic(Y,!0)),2&t&&(c.pc(n=c.dc())&&(e.header=n.first),c.pc(n=c.dc())&&(e.conjugateBtn=n.first))},decls:2,vars:3,consts:[["class","panel",4,"ngIf"],[1,"panel"],[1,"panel__header__container"],["class","panel__header panel__header--tableview",4,"ngIf"],[1,"panel__underline","height-5"],[4,"ngIf"],["class","float-right ui-button toolbar__tool","mat-icon-button","",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","click",4,"ngIf"],[1,"panel__header","panel__header--tableview"],[1,"panel__title"],["header",""],["class","panel__toolbar toolbar",4,"ngIf"],[1,"panel__toolbar","toolbar"],["mat-raised-button","",1,"conjugate","mat-accent",3,"click"],["conjugate",""],["class","toolbar__tool ui-button",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","change",4,"ngIf"],["class","toolbar__tool ui-button","mat-icon-button","",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","click",4,"ngIf"],["class","ui-button toolbar__tool","mat-icon-button","",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","click",4,"ngIf"],["mat-icon-button","",1,"ui-button","toolbar__tool",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","click"],["aria-label","Conjugate",4,"ngIf"],["aria-label","Hide toolbar"],[1,"toolbar__tool","ui-button",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","change"],["value","0"],["selected","","value","1"],["value","2"],["value","3"],["mat-icon-button","",1,"toolbar__tool","ui-button",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","click"],["aria-label","Switch pronoun and temp"],["aria-label","Download conjugations"],["aria-label","Conjugate"],["mat-icon-button","",1,"float-right","ui-button","toolbar__tool",3,"matTooltip","matTooltipShowDelay","matTooltipHideDelay","matTooltipPosition","click"],["aria-label","Show toolbar"],["class","center-text margin-top-50",3,"innerHTML",4,"ngIf"],["class","desktop-only center-text margin-top-50 padding-20",3,"ngClass","innerHTML",4,"ngIf"],["class","mobile-only padding-15 center-text",3,"innerHTML",4,"ngIf"],["class","centered margin-top-100",3,"color",4,"ngIf"],[1,"panel__tree__container"],["class","full-width full-height",3,"hidden",4,"ngIf"],[3,"hidden",4,"ngIf"],[1,"center-text","margin-top-50",3,"innerHTML"],[1,"desktop-only","center-text","margin-top-50","padding-20",3,"ngClass","innerHTML"],[1,"mobile-only","padding-15","center-text",3,"innerHTML"],[1,"centered","margin-top-100",3,"color"],[1,"full-width","full-height",3,"hidden"],[3,"hidden"],["id","table-container",1,"rel"],["class","error__container",4,"ngIf"],["class","full-width abs",4,"ngIf"],[1,"error__container"],[1,"error__header"],[1,"error__message"],[1,"full-width","abs"],["class","b--bottom",4,"ngFor","ngForOf"],[1,"center-text"],[1,"b--bottom"],[4,"ngFor","ngForOf"],["class","center-text",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"]],template:function(t,e){1&t&&(c.Ac(0,It,8,6,"div",0),c.hc(1,"async")),2&t&&c.mc("ngIf",c.ic(1,1,e.settings$))},directives:[v.k,y.a,H.a,F.a,h.p,h.r,v.i,E.b,R,v.j],pipes:[v.b,j.c],styles:["button.conjugate[_ngcontent-%COMP%]{line-height:1.875em!important;padding:0 1em!important;margin-right:1em}"],changeDetection:0}),Ot),kt=n("IOEv"),Bt=n("pTnX");function Dt(t,e){if(1&t&&(c.Ub(0,"span",9),c.Cc(1),c.Tb()),2&t){var n=c.gc(2).ngIf;c.Bb(1),c.Fc(" (+",n.agent.length-1," ",2===n.agent.length?"other":"others",") ")}}function Pt(t,e){if(1&t&&(c.Ub(0,"mat-option",10),c.Cc(1),c.Tb()),2&t){var n=e.$implicit;c.mc("value",n),c.Bb(1),c.Dc(n.gloss)}}function St(t,e){if(1&t){var n=c.Vb();c.Ub(0,"mat-form-field",5),c.Ub(1,"mat-label"),c.Cc(2),c.hc(3,"translate"),c.Tb(),c.Ub(4,"mat-select",6),c.cc("selectionChange",(function(t){return c.tc(n),c.gc(2).onAgentSelect(t)})),c.Ub(5,"mat-select-trigger"),c.Cc(6),c.Ac(7,Dt,2,2,"span",7),c.Tb(),c.Ac(8,Pt,2,2,"mat-option",8),c.hc(9,"async"),c.Tb(),c.Tb()}if(2&t){var i=c.gc().ngIf,o=c.gc();c.Bb(2),c.Dc(c.ic(3,5,"ww.tableviewer.pers.select-agent")),c.Bb(2),c.mc("ngModel",i.agent),c.Bb(2),c.Ec(" ",i.agent?null==i.agent[0]?null:i.agent[0].gloss:""," "),c.Bb(1),c.mc("ngIf",i.agent.length>1),c.Bb(1),c.mc("ngForOf",c.ic(9,7,o.possiblePronouns$))}}function xt(t,e){if(1&t&&(c.Ub(0,"span",9),c.Cc(1),c.Tb()),2&t){var n=c.gc(2).ngIf;c.Bb(1),c.Fc(" (+",n.patient.length-1," ",2===n.patient.length?"other":"others",") ")}}function At(t,e){if(1&t&&(c.Ub(0,"mat-option",10),c.Cc(1),c.Tb()),2&t){var n=e.$implicit;c.mc("value",n),c.Bb(1),c.Dc(n.gloss)}}function $t(t,e){if(1&t){var n=c.Vb();c.Ub(0,"mat-form-field",5),c.Ub(1,"mat-label"),c.Cc(2),c.hc(3,"translate"),c.Tb(),c.Ub(4,"mat-select",6),c.cc("selectionChange",(function(t){return c.tc(n),c.gc(2).onPatientSelect(t)})),c.Ub(5,"mat-select-trigger"),c.Cc(6),c.Ac(7,xt,2,2,"span",7),c.Tb(),c.Ac(8,At,2,2,"mat-option",8),c.hc(9,"async"),c.Tb(),c.Tb()}if(2&t){var i=c.gc().ngIf,o=c.gc();c.Bb(2),c.Dc(c.ic(3,5,"ww.tableviewer.pers.select-patient")),c.Bb(2),c.mc("ngModel",i.patient),c.Bb(2),c.Ec(" ",i.patient?null==i.patient[0]?null:i.patient[0].gloss:""," "),c.Bb(1),c.mc("ngIf",i.patient.length>1),c.Bb(1),c.mc("ngForOf",c.ic(9,7,o.possiblePronouns$))}}function Mt(t,e){if(1&t&&(c.Ub(0,"div",1),c.Ub(1,"div",2),c.Ub(2,"h5",3),c.Cc(3),c.hc(4,"translate"),c.Tb(),c.Tb(),c.Ac(5,St,10,9,"mat-form-field",4),c.Ac(6,$t,10,9,"mat-form-field",4),c.Tb()),2&t){var n=c.gc();c.Bb(3),c.Dc(c.ic(4,3,"ww.tableviewer.pers.title")),c.Bb(2),c.mc("ngIf",n.validationService.validate("display","categories","agents")),c.Bb(1),c.mc("ngIf",n.validationService.validate("display","categories","patients"))}}var Vt,Ht=((Vt=function(){function t(e,n,i){_classCallCheck(this,t),this.pnService=e,this.store=n,this.validationService=i,this.possiblePronouns$=this.pnService.pronouns$}return _createClass(t,[{key:"ngOnInit",value:function(){this.selection$=this.store.pipe(Object(l.t)(d))}},{key:"onAgentSelect",value:function(t){this.store.dispatch(Object(f.a)({agent:t.value}))}},{key:"onPatientSelect",value:function(t){this.store.dispatch(Object(f.e)({patient:t.value}))}}]),t}()).\u0275fac=function(t){return new(t||Vt)(c.Ob(r.e),c.Ob(l.h),c.Ob(r.h))},Vt.\u0275cmp=c.Ib({type:Vt,selectors:[["ww-tableviewer-pers-panel"]],decls:2,vars:3,consts:[["class","panel",4,"ngIf"],[1,"panel"],[1,"panel__header--tableview","panel__header"],[1,"panel__title"],["class","control",4,"ngIf"],[1,"control"],["multiple","",3,"ngModel","selectionChange"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"example-additional-selection"],[3,"value"]],template:function(t,e){1&t&&(c.Ac(0,Mt,7,5,"div",0),c.hc(1,"async")),2&t&&c.mc("ngIf",c.ic(1,1,e.selection$))},directives:[v.k,w.b,w.e,kt.a,h.l,h.o,kt.c,v.j,Bt.i],pipes:[v.b,j.c],styles:[".control[_ngcontent-%COMP%]{margin-left:25px;margin-top:5px}button.deselect[_ngcontent-%COMP%]{padding:0 1em!important;height:20px;margin:16px 8px;line-height:1}"],changeDetection:0}),Vt);function Ft(t,e){if(1&t&&(c.Ub(0,"span",8),c.Cc(1),c.Tb()),2&t){var n=c.gc().ngIf;c.Bb(1),c.Fc(" (+",n.option.length-1," ",2===n.option.length?"other":"others",") ")}}function Et(t,e){if(1&t&&(c.Ub(0,"mat-option",9),c.Cc(1),c.Tb()),2&t){var n=e.$implicit;c.mc("value",n),c.Bb(1),c.Dc(n.gloss)}}function Lt(t,e){if(1&t){var n=c.Vb();c.Ub(0,"mat-select",5),c.cc("selectionChange",(function(t){return c.tc(n),c.gc().onOptionSelect(t)})),c.Ub(1,"mat-select-trigger"),c.Cc(2),c.Ac(3,Ft,2,2,"span",6),c.Tb(),c.Ac(4,Et,2,2,"mat-option",7),c.hc(5,"async"),c.Tb()}if(2&t){var i=e.ngIf,o=c.gc();c.mc("ngModel",i.option),c.Bb(2),c.Ec(" ",i.option.length?i.option[0].gloss:""," "),c.Bb(1),c.mc("ngIf",i.option.length>1),c.Bb(1),c.mc("ngForOf",c.ic(5,4,o.possibleTimes$))}}var Wt,Gt,Nt,zt,Jt=((Wt=function(){function t(e,n){_classCallCheck(this,t),this.optionService=e,this.store=n,this.possibleTimes$=this.optionService.options$}return _createClass(t,[{key:"ngOnInit",value:function(){this.selection$=this.store.pipe(Object(l.t)(d))}},{key:"onOptionSelect",value:function(t){this.store.dispatch(Object(f.d)({option:t.value}))}}]),t}()).\u0275fac=function(t){return new(t||Wt)(c.Ob(r.d),c.Ob(l.h))},Wt.\u0275cmp=c.Ib({type:Wt,selectors:[["ww-tableviewer-temp-panel"]],decls:11,vars:9,consts:[[1,"panel"],[1,"panel__header","panel__header--tableview"],[1,"panel__title"],[1,"control"],["multiple","",3,"ngModel","selectionChange",4,"ngIf"],["multiple","",3,"ngModel","selectionChange"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"example-additional-selection"],[3,"value"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"h5",2),c.Cc(3),c.hc(4,"translate"),c.Tb(),c.Tb(),c.Ub(5,"mat-form-field",3),c.Ub(6,"mat-label"),c.Cc(7),c.hc(8,"translate"),c.Tb(),c.Ac(9,Lt,6,6,"mat-select",4),c.hc(10,"async"),c.Tb(),c.Tb()),2&t&&(c.Bb(3),c.Dc(c.ic(4,3,"ww.tableviewer.temp.title")),c.Bb(4),c.Dc(c.ic(8,5,"ww.tableviewer.temp.select")),c.Bb(2),c.mc("ngIf",c.ic(10,7,e.selection$)))},directives:[w.b,w.e,v.k,kt.a,h.l,h.o,kt.c,v.j,Bt.i],pipes:[j.c,v.b],styles:[".control[_ngcontent-%COMP%]{width:80%;margin-left:25px;margin-top:-10px}.panel[_ngcontent-%COMP%]{top:0;position:absolute}button.deselect[_ngcontent-%COMP%]{padding:0 1em!important;height:20px;margin:16px 8px;line-height:1}"],changeDetection:0}),Wt),Rt=["conjPanel"],qt=[{path:"",component:(Gt=function(){function t(){_classCallCheck(this,t),this.breakpoint=1100,this.useTestAPI=!1}return _createClass(t,[{key:"ngOnInit",value:function(){this.cols=window.innerWidth<=this.breakpoint?3:12,this.rows=window.innerWidth<=this.breakpoint?1:5,this.conjcolspan=window.innerWidth<=this.breakpoint?3:9,this.conjrowspan=window.innerWidth<=this.breakpoint?3:5}},{key:"onResize",value:function(t){this.cols=t.target.innerWidth<=this.breakpoint?3:12,this.rows=window.innerWidth<=this.breakpoint?1:5,this.conjcolspan=window.innerWidth<=this.breakpoint?3:9,this.conjrowspan=window.innerWidth<=this.breakpoint?3:5}},{key:"conjugate",value:function(){this.conjPanel.conjugate()}}]),t}(),Gt.\u0275fac=function(t){return new(t||Gt)},Gt.\u0275cmp=c.Ib({type:Gt,selectors:[["ww-tableviewer"]],viewQuery:function(t,e){var n;1&t&&c.Ic(Rt,!0),2&t&&c.pc(n=c.dc())&&(e.conjPanel=n.first)},decls:11,vars:9,consts:[[1,"container","page__content","vwidth-90","centered","margin-bottom-50"],["rowHeight","8em",3,"cols","resize"],[1,"br--tl","b--left","b--top","b--bottom","bg-white",3,"colspan","rowspan"],[1,"custom-scroll","full-width","full-height"],[1,"b--top","b--left","b--right","br--tr","br--br","b--bottom","bg-white",3,"colspan","rowspan"],["conjPanel",""],[1,"b--left","bg-white",3,"colspan","rowspan"],[1,"br--bl","b--top","b--left","b--bottom","bg-white",3,"colspan","rowspan"],[1,"custom-scroll","full-width"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"mat-grid-list",1),c.cc("resize",(function(t){return e.onResize(t)}),!1,c.sc),c.Ub(2,"mat-grid-tile",2),c.Pb(3,"ww-tableviewer-verb-panel",3),c.Tb(),c.Ub(4,"mat-grid-tile",4),c.Pb(5,"ww-tableviewer-conj-panel",3,5),c.Tb(),c.Ub(7,"mat-grid-tile",6),c.Pb(8,"ww-tableviewer-pers-panel",3),c.Tb(),c.Ub(9,"mat-grid-tile",7),c.Pb(10,"ww-tableviewer-temp-panel",8),c.Tb(),c.Tb(),c.Tb()),2&t&&(c.Bb(1),c.mc("cols",e.cols),c.Bb(1),c.mc("colspan",3)("rowspan",2),c.Bb(2),c.mc("colspan",e.conjcolspan)("rowspan",e.conjrowspan),c.Bb(3),c.mc("colspan",3)("rowspan",2),c.Bb(2),c.mc("colspan",3)("rowspan",1))},directives:[a.a,a.c,S,Ut,Ht,Jt],styles:[""],changeDetection:0}),Gt),data:{title:"ww.menu.tableviewer"}}],Yt=((zt=function t(){_classCallCheck(this,t)}).\u0275mod=c.Mb({type:zt}),zt.\u0275inj=c.Lb({factory:function(t){return new(t||zt)},imports:[[o.j.forChild(qt)],o.j]}),zt),Xt=((Nt=function t(){_classCallCheck(this,t)}).\u0275mod=c.Mb({type:Nt}),Nt.\u0275inj=c.Lb({factory:function(t){return new(t||Nt)},imports:[[i.a,Yt,N.a]]}),Nt)}}]);